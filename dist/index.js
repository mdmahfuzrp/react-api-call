import t from'axios';import{useState as e,useCallback as n,useEffect as o}from'react';const r=({token:n,tokenType:o='Bearer',headersConfig:r={}}={})=>{const[s,a]=e(!1);let i=null,c=null;return{handleSubmit:async({url:e,data:s,method:u='POST',onSuccess:l,onError:f,refetch:p})=>{a(!0);const d={'Content-Type':'application/json',...r};n&&(d.Authorization=`${o} ${n}`);try{const n={method:u,url:e,headers:d,data:s},o=await t(n);if(o.status>=200&&o.status<300){i=o,l&&'function'==typeof l&&l(o),p&&p()}else{const t=o||'Request failed';c=t,f&&'function'==typeof f&&f(t)}}catch(t){const e=t||'Request failed';c=e,f&&'function'==typeof f&&f(e)}finally{a(!1)}return{error:c,response:i}},isLoading:s}};function s(t){document.cookie=`${t}=; Max-Age=-99999999; path=/;`}function a(t){if('undefined'!=typeof document){const e=document?.cookie?.split('; ');for(const n of e){const[e,o]=n.split('=');if(e===t)return o}}return null}function i(t,e,n){const o=new Date;o.setDate(o.getDate()+n);const r=`${t}=${e}; expires=${o.toUTCString()}; path=/`;document.cookie=r}const c=()=>({setCookies:i,getCookies:a,deleteCookie:s}),u=({token:n='',tokenType:o='Bearer',headersConfig:r={}}={})=>{const[s,a]=e(!1);return{handleDelete:async({url:e,refetch:s,onSuccess:i,onError:c,method:u='DELETE'})=>{a(!0);const l={'Content-Type':'application/json',...r};n&&(l.Authorization=`${o} ${n}`);try{const n={method:u,url:`${e}`,headers:l},o=await t(n);if(o.status>=200&&o.status<300){const t=o;return i&&'function'==typeof i&&i(t),s&&s(),t}{const t=o;return c&&'function'==typeof c&&c(t),t}}catch(t){return c&&'function'==typeof c&&c(t),t}finally{a(!1)}},isDeleting:s}},l=({apiUrl:r=null,token:s,tokenType:a='Bearer',headersConfig:i={}}={})=>{const[c,u]=e(!0),[l,f]=e(r),[p,d]=e(null),[h,y]=e(null),m=n((async(e,n=!0)=>{n&&u(!0);const o={'Content-Type':'application/json',...i};s&&(o.Authorization=`${a} ${s}`);try{const n=await t.get(e,{headers:o});n.status>=200&&n.status<300?(d(n),y(null)):(y(n),d(null))}catch(t){y(t),d(null)}finally{u(!1)}}),[s,a,i]),k=n(((t=!1)=>{l&&m(l,t)}),[m,l]);return o((()=>{l&&m(l)}),[l]),{setUrl:f,isLoading:c,response:p,error:h,refetch:k}};export{c as useCookies,u as useDeleteMethod,l as useGetMethod,r as useSubmitMethod};
